<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Accessibility Test</title>
        <style>
            .sr-only {
                position: absolute;
                width: 1px;
                height: 1px;
                padding: 0;
                margin: -1px;
                overflow: hidden;
                clip: rect(0, 0, 0, 0);
                white-space: nowrap;
                border: 0;
            }

            .focus-visible {
                outline: 2px solid #8b5cf6;
                outline-offset: 2px;
            }

            button {
                padding: 8px 16px;
                margin: 8px;
                border: none;
                border-radius: 4px;
                background-color: #6366f1;
                color: white;
                cursor: pointer;
            }

            button:hover {
                background-color: #4f46e5;
            }

            button:focus {
                outline: 2px solid #8b5cf6;
                outline-offset: 2px;
            }
        </style>
    </head>
    <body>
        <h1>Accessibility Test Page</h1>

        <div class="sr-only">
            <p>This text is only visible to screen readers</p>
        </div>

        <button onclick="testSpeech()" aria-label="Test speech synthesis">
            Test Speech Synthesis
        </button>

        <button onclick="testAnnouncement()" aria-label="Test announcement">
            Test Announcement
        </button>

        <button onclick="testFocus()" aria-label="Test focus">
            Test Focus
        </button>

        <div id="announcement-area" aria-live="polite" aria-atomic="true"></div>

        <script>
            function testSpeech() {
                if ("speechSynthesis" in window) {
                    const utterance = new SpeechSynthesisUtterance(
                        "Speech synthesis is working correctly."
                    );
                    utterance.rate = 1.0;
                    utterance.pitch = 1.0;
                    utterance.volume = 1.0;
                    speechSynthesis.speak(utterance);
                    console.log("Speech synthesis test executed");
                } else {
                    console.error("Speech synthesis not supported");
                }
            }

            function testAnnouncement() {
                const announcementArea =
                    document.getElementById("announcement-area");
                announcementArea.textContent =
                    "Announcement system is working correctly.";
                console.log("Announcement test executed");
            }

            function testFocus() {
                const buttons = document.querySelectorAll("button");
                buttons.forEach((button, index) => {
                    setTimeout(() => {
                        button.focus();
                        console.log(`Button ${index + 1} focused`);
                    }, index * 1000);
                });
            }

            // Test keyboard navigation
            document.addEventListener("keydown", (e) => {
                if (e.key === "Tab") {
                    console.log(
                        "Tab key pressed - keyboard navigation working"
                    );
                }
            });

            // Test focus events
            document.addEventListener("focusin", (e) => {
                console.log(
                    "Element focused:",
                    e.target.tagName,
                    e.target.textContent?.substring(0, 30)
                );
            });

            console.log("Accessibility test page loaded");
        </script>
    </body>
</html>
